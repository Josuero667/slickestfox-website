<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>slickestfox - Home</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<!-- Background pattern layers -->
	<div class="bg bg-circles" aria-hidden="true"></div>
	<div class="bg bg-pluses" aria-hidden="true"></div>

	<header class="site-header">
		<h1>slickestfox</h1>
		<nav>
			<a href="index.html">Home</a>
			<a href="art.html">Art</a>
			<a href="music.html">Music</a>
			<a href="videos.html">Videos</a>
			<a href="comissions.html">Commissions</a>
			<a href="dog-posting.html">Dog-PostingT</a>
		</nav>
	</header>

	<!-- HERO / BANNER -->
	<section class="hero">
		<img class="hero-img" src="assets/banner.jpg" alt="Banner artwork">
		<div class="hero-overlay">
			<h2>Haii helloo! Welcome!</h2>
			<p class="tagline">In this site you can find all my Art, Music, Videos, Commission Information and more! I implore you too explore all it has to offer! </p>
			<div class="cta-row">
				<a class="btn" href="music.html">Listen</a>
				<a class="btn btn-ghost" href="art.html">View Art</a>
			</div>
		</div>
	</section>

	<main class="container">
		<section class="intro">
			<h3>What I Do</h3>
			<p>I make visual art, produce music, and post videos. New projects drop regularly-stick around.</p>
		</section>
	</main>

	<footer>
		<p>c 2025 slickestFox</p>
	</footer>

	<!-- Inline JSON (loop config) -->
	<script id="loop-data" type="application/json">
	{
		"loops": [
			{ "src": "assets/audio/loops/index.ogg" }
		]
	}
	</script>

	<!-- Background Audio Script (with saved prefs + first-gesture autoplay) -->
	<script>
	(() => {
		const LS_MUTE_KEY = 'siteAudioMuted';
		const LS_VOL_KEY = 'siteAudioVolume';
		let audioEl = null;

		const loadPrefs = () => {
			let muted = true; // default
			let vol = 0.5;    // default
			try {
				const m = localStorage.getItem(LS_MUTE_KEY);
				const v = localStorage.getItem(LS_VOL_KEY);
				if (m !== null) muted = m === '1';
				if (v !== null) {
					const nv = Math.max(0, Math.min(1, parseFloat(v)));
					if (!Number.isNaN(nv)) vol = nv;
				}
			} catch {}
			return { muted, vol };
		};
		const saveMute = (m) => { try { localStorage.setItem(LS_MUTE_KEY, m ? '1' : '0'); } catch {} };
		const saveVol = (v) => { try { localStorage.setItem(LS_VOL_KEY, String(v)); } catch {} };

		// Inline JSON with loop sources
		let data = {};
		try { data = JSON.parse(document.getElementById("loop-data").textContent); } catch {}
		const loops = Array.isArray(data.loops) ? data.loops : [];

		document.addEventListener("DOMContentLoaded", ()=>{
			if (!loops.length) return;
			const src = loops[Math.floor(Math.random() * loops.length)].src;

			// create <audio>
			audioEl = new Audio(src);
			audioEl.loop = true;

			// apply saved prefs
			const { muted, vol } = loadPrefs();
			audioEl.volume = vol;
			audioEl.muted = muted;

			// Try to play (will often succeed if muted)
			audioEl.play().catch(()=>{});

			// If unmuted but autoplay blocked, start on first user gesture
			const onFirstGesture = () => {
				if (!audioEl) return;
				if (!audioEl.muted && audioEl.paused){ audioEl.play().catch(()=>{}); }
				window.removeEventListener('pointerdown', onFirstGesture);
				window.removeEventListener('keydown', onFirstGesture);
			};
			window.addEventListener('pointerdown', onFirstGesture, { once:false, passive:true });
			window.addEventListener('keydown', onFirstGesture, { once:false });

			// controls
			const controls = document.createElement("div");
			controls.id = "music-controls";

			const btn = document.createElement("button");
			btn.id = "mute-btn";
			btn.textContent = muted || vol === 0 ? "ðŸ”‡" : "ðŸ”Š";

			const slider = document.createElement("input");
			slider.type = "range";
			slider.id = "volume-slider";
			slider.min = "0"; slider.max = "1"; slider.step = "0.01";
			slider.value = String(vol);

			btn.addEventListener("click", ()=>{
				if (!audioEl) return;
				audioEl.muted = !audioEl.muted;
				saveMute(audioEl.muted);
				btn.textContent = (audioEl.muted || audioEl.volume == 0) ? "ðŸ”‡" : "ðŸ”Š";
				if (!audioEl.muted && audioEl.paused){
					audioEl.play().catch(()=>{});
				}
			});

			slider.addEventListener("input", ()=>{
				if (!audioEl) return;
				const v = Math.max(0, Math.min(1, parseFloat(slider.value)));
				audioEl.volume = v;
				saveVol(v);
				btn.textContent = (audioEl.muted || v === 0) ? "ðŸ”‡" : "ðŸ”Š";
			});

			// react to other tabs changing settings
			window.addEventListener('storage', (e)=>{
				if (!audioEl) return;
				if (e.key === LS_MUTE_KEY && e.newValue != null) {
					audioEl.muted = e.newValue === '1';
					btn.textContent = (audioEl.muted || audioEl.volume == 0) ? "ðŸ”‡" : "ðŸ”Š";
					if (!audioEl.muted && audioEl.paused){ audioEl.play().catch(()=>{}); }
				}
				if (e.key === LS_VOL_KEY && e.newValue != null) {
					const v = Math.max(0, Math.min(1, parseFloat(e.newValue)));
					if (!Number.isNaN(v)) {
						audioEl.volume = v;
						slider.value = String(v);
						btn.textContent = (audioEl.muted || v === 0) ? "ðŸ”‡" : "ðŸ”Š";
					}
				}
			});

			controls.appendChild(btn);
			controls.appendChild(slider);
			document.body.appendChild(controls);
		});
	})();
	</script>


</body>
</html>
